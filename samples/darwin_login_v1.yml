swagger: '2.0'
info:
  version: '2.0.5'
  title: Darwin API
host: qa.api.darwin.dev.sparkcognition.com
basePath: /v1
schemes:
  - https
paths:
  /auth/login/user:
    x-summary: AUTH
    post:
      responses:
        '201':
          description: Success
          schema:
            $ref: '#/definitions/Access Token'
        '400':
          description: Bad Request. A username is required for end user logins
        '401':
          description: Unauthorized. Incorrect username or password
      summary: Login as a user
      operationId: post_login_user
      parameters:
        - name: username
          in: formData
          type: string
          required: true
          description: Enter a username for an end user
        - name: pass1
          in: formData
          type: string
          required: true
          description: Please enter a secure password
        - name: X-Fields
          in: header
          type: string
          format: mask
          description: An optional fields mask
      consumes:
        - application/x-www-form-urlencoded; multipart/form-data
      tags:
        - auth     
definitions:
  Access Token:
    properties:
      access_token:
        type: string
        description: This token is to be used in all subsequent requests
    type: object
  Admin Multiple Job Info:
    required:
      - client_api_key
      - endtime
      - job_error
      - job_id
      - job_name
      - job_type
      - percent_complete
      - starttime
      - status
    properties:
      job_id:
        type: string
        description: The job id
      job_name:
        type: string
        description: The job name
      client_name:
        type: string
        description: The client username
      client_api_key:
        type: string
        description: The client api key
      status:
        type: string
        description: The current job status
        example: Requested
      starttime:
        type: string
        description: The start time of the job
      endtime:
        type: string
        description: The start time of the job
      percent_complete:
        type: integer
        description: The percentage complete for a job
        example: 30
      job_type:
        type: string
        description: The type of job corresponding to the method used to create the job
      loss:
        type: number
        description: The current loss of the model
      generations:
        type: integer
        description: The number of generations that have been run so far
      dataset_names:
        type: array
        description: The datasets that are utilized by a job
        items:
          type: string
      artifact_names:
        type: array
        description: The artifacts generated by a job
        items:
          type: string
      model_name:
        type: string
        description: The name of the completed model
      model_parameters:
        type: object
        description: The model parameters
      job_error:
        type: object
        description: The error if the job failed
    type: object
  Admin Multiple User Info:
    required:
      - client_api_key
      - created_at
      - tier
      - username
    properties:
      username:
        type: string
        description: The user name
      tier:
        type: integer
        description: The tier number
      created_at:
        type: string
        description: The create time of the user
      client_api_key:
        type: string
        description: The user client api key
      parent_id:
        type: string
        description: The parent id of the user
      expires_on:
        type: string
        description: The date this account will expires (an empty value implies no expiration)
      email:
        type: string
        description: The email address of the user
    type: object
  Admin Multiple Client Info:
    required:
      - client_api_key
      - created_at
      - tier
      - user_id
    properties:
      user_id:
        type: string
        description: The user id
      internal_name:
        type: string
        description: The client username
      tier:
        type: integer
        description: The tier number
      created_at:
        type: string
        description: The create time of the user
      expires_on:
        type: string
        description: The date this account will expires (an empty value implies no expiration)
      client_api_key:
        type: string
        description: The user client api key
    type: object
  API Key And User:
    properties:
      api_key:
        type: string
        description: This api key can be used to register a service or end user
      username:
        type: string
        description: This is the username of the created user
      password:
        type: string
        description: This is the one-time password of the created user. It must be changed
    type: object
  API Key:
    properties:
      api_key:
        type: string
        description: This api key can be used to register a service or end user
    type: object
  Tier Creation Information:
    properties:
      tier:
        type: string
        description: This is the unique tier number
    type: object
  Job Status:
    required:
      - artifact_names
      - dataset_names
      - endtime
      - job_error
      - job_id
      - job_name
      - job_type
      - percent_complete
      - starttime
      - status
    properties:
      job_name:
        type: string
        description: The job name
      job_id:
        type: string
        description: The job id
      status:
        type: string
        description: The current job status
        example: Requested
      starttime:
        type: string
        description: The start time of the job
      endtime:
        type: string
        description: The start time of the job
      percent_complete:
        type: integer
        description: The percentage complete for a job
        example: 30
      job_type:
        type: string
        description: The type of job corresponding to the method used to create the job
      loss:
        type: number
        description: The current loss of the model
      generations:
        type: integer
        description: The number of generations that have been run so far
      dataset_names:
        type: array
        description: The datasets that are utilized by a job
        items:
          type: string
      artifact_names:
        type: array
        description: The artifacts generated by a job
        items:
          type: string
      model_name:
        type: string
        description: The name of the completed model
      job_error:
        type: object
        description: The error if the job failed
    type: object
  Multiple Job Status:
    required:
      - artifact_names
      - dataset_names
      - endtime
      - job_error
      - job_type
      - model_name
      - percent_complete
      - starttime
      - status
    properties:
      status:
        type: string
        description: The current job status
        example: 'Requested, Running, Complete'
      starttime:
        type: string
        description: The start time of the job
      endtime:
        type: string
        description: The start time of the job
      percent_complete:
        type: integer
        description: The percentage complete for a job
        example: 30
      job_type:
        type: string
        description: The type of job corresponding to the method used to create the job
      loss:
        type: number
        description: The current loss of the model
      generations:
        type: integer
        description: The number of generations that have been run so far
      dataset_names:
        type: array
        description: The datasets that are utilized by a job
        items:
          type: string
      artifact_names:
        type: array
        description: The artifacts generated by a job
        items:
          type: string
      model_name:
        type: string
        description: The name of the completed model
      job_error:
        type: object
        description: The error if the job failed
    type: object
  Tier Information:
    required:
      - tier
    properties:
      tier:
        type: integer
        description: The tier number
      model_limit:
        type: integer
        description: The maximum number of models a client can train
      job_limit:
        type: integer
        description: The maximum number of concurrent jobs a client can run
      upload_limit:
        type: integer
        description: The maximum number of artifacts a client can upload
      user_limit:
        type: integer
        description: The maximum number of users a client can create
    type: object
  All Artifact Information:
    properties:
      id:
        type: string
        description: The artifact id
      name:
        type: string
        description: The user-given name or a generated uuid
      type:
        type: string
        description: The artifact type
      created_at:
        type: string
        format: date-time
        description: The creation date of the artifact
      mbytes:
        type: number
        description: The size of the artifact
    type: object
  Artifact Information:
    properties:
      name:
        type: string
        description: The user-given name or a generated uuid
      type:
        type: string
        description: The artifact type
      created_at:
        type: string
        format: date-time
        description: The creation date of the artifact
      mbytes:
        type: number
        description: The size of the artifact
    type: object
  Client Information:
    required:
      - tier
      - username
    properties:
      username:
        type: string
        description: The client username
      tier:
        type: integer
        description: The client tier
      model_limit:
        type: integer
        description: The maximum number of models a client can train
      job_limit:
        type: integer
        description: The maximum number of concurrent jobs a client can run
      upload_limit:
        type: integer
        description: The maximum number of artifacts a client can upload
      user_limit:
        type: integer
        description: The maximum number of users a client can create
    type: object
  Multiple Model Information:
    required:
      - algorithm
      - complete
      - description
      - generations
      - id
      - loss
      - name
      - parameters
      - trained_on
      - trained_on_id
      - updated_at
    properties:
      id:
        type: object
        description: The model id
      name:
        type: string
        description: The model name
      type:
        type: string
        description: The model type
      problem_type:
        type: string
        description: The model problem type
      updated_at:
        type: string
        format: date-time
        description: The last time the model was saved
      trained_on:
        type: array
        description: The datasets the model was trained on
        items:
          type: string
      trained_on_id:
        type: array
        description: The dataset ids the model was trained on
        items:
          type: string
      loss:
        type: number
        description: The model loss
      complete:
        type: object
        description: If a model has completed training or not
      generations:
        type: integer
        description: The number of generations that have been run so far
      parameters:
        type: object
        description: The model parameters
      description:
        type: object
        description: The model description
      train_time_seconds:
        type: integer
        description: Time trained in seconds
      algorithm:
        type: string
        description: The best genomes algorithm
      running_job_id:
        type: string
        description: The ID of the job that is running
    type: object
  Model Information:
    required:
      - algorithm
      - complete
      - description
      - generations
      - id
      - loss
      - name
      - parameters
      - trained_on
      - trained_on_id
      - updated_at
    properties:
      id:
        type: object
        description: The model id
      name:
        type: string
        description: The model name
      type:
        type: string
        description: The model type
      problem_type:
        type: string
        description: The model problem type
      updated_at:
        type: string
        format: date-time
        description: The last time the model was saved
      trained_on:
        type: array
        description: The datasets the model was trained on
        items:
          type: string
      trained_on_id:
        type: array
        description: The dataset ids the model was trained on
        items:
          type: string
      loss:
        type: number
        description: The model loss
      complete:
        type: object
        description: If a model has completed training or not
      generations:
        type: integer
        description: The number of generations that have been run so far
      parameters:
        type: object
        description: The model parameters
      description:
        type: object
        description: The model description
      train_time_seconds:
        type: integer
        description: Time trained in seconds
      algorithm:
        type: string
        description: The best genomes algorithm
      running_job_id:
        type: string
        description: The ID of the job that is running
    type: object
  Population Results:
    properties:
      population:
        $ref: '#/definitions/Model Types'
    type: object
  Model Types:
    properties:
      model_types:
        type: object
    type: object
  Multiple Dataset Information:
    required:
      - categorical
      - id
      - imbalanced
      - mbytes
      - minimum_recommeded_train_time
      - name
      - sequential
      - updated_at
    properties:
      id:
        type: object
        description: The dataset id
      name:
        type: string
        description: The dataset name
      mbytes:
        type: number
        description: The size of the dataset in MB
      minimum_recommeded_train_time:
        type: string
        description: The minimum recommended training time for a model trained on this dataset
      updated_at:
        type: string
        format: date-time
        description: The last time the dataset was uploaded
      categorical:
        type: boolean
        description: Whether the data is categorical or not
      sequential:
        type: boolean
        description: Whether the data is sequential or not
      imbalanced:
        type: boolean
        description: Whether the data is imbalanced or not
    type: object
  Dataset Information:
    properties:
      dataset_name:
        type: string
        description: The dataset name or identifier
    type: object
  Model creation parameters:
    required:
      - dataset_names
    properties:
      dataset_names:
        type: array
        description: A list of dataset names. Currently only one dataset at a time is supported
        items:
          type: string
      val_size:
        type: number
        description: The percentage of training data to use for validation
        default: 0.2
      cv_kfold:
        type: integer
        description: 'Number of k fold for train/validation cross validation. Default: 1-fold for non-ts and 3-fold for ts data.'
      is_class:
        type: boolean
        description: 'For supervised models, this parameter indicates whether the target is a classification or regression target'
      job_name:
        type: string
        description: The name of the job
        minLength: 1
        maxLength: 200
        pattern: '^[^\/?&]*$'
      model_name:
        type: string
        description: The name of the model
        minLength: 1
        maxLength: 200
        pattern: '^[^\/?&]*$'
      loss_fn_name:
        type: string
        description: The loss function to use during training (supervised only)
        example: CrossEntropy
        enum:
          - CrossEntropy
          - MSE
          - BCE
          - L1
          - NLL
          - BCEWithLogits
          - SmoothL1
      fitness_fn_name:
        type: string
        description: The fitness function to use during training (supervised only)
        example: accuracy
        enum:
          - accuracy
          - average_precision
          - balanced_accuracy
          - f1_macro
          - f1_micro
          - f1_weighted
          - neg_log_loss
          - neg_mean_absolute_error
          - neg_median_absolute_error
          - neg_mse
          - neg_rmse
          - neg_rmsle
          - precision_macro
          - precision_micro
          - precision_weighted
          - recall_macro
          - recall_micro
          - recall_weighted
          - roc_auc
          - r2
      max_train_time:
        type: string
        description: 'The maximum amount of time to train the model in HH:MM'
        default: '00:01'
        maxLength: 5
        pattern: '[0-9]{2}:[0-9]{2}'
      max_epochs:
        type: integer
        description: The target to classify/predict
        minimum: 0
      recurrent:
        type: boolean
        description: 'Advanced: Set this to true to use a recurrent model'
      impute:
        type: string
        description: The type of imputation to use
        example: ffill
        enum:
          - ffill
          - bfill
          - mean
      clustering:
        type: boolean
        description: Clustering in unsupervised modeling.
        default: true
      anomaly:
        type: boolean
        description: Standalone Anomaly detection model (no clustering) in unsupervised modeling.
        default: false
      n_clusters:
        type: integer
        description: 'The number of clusters to generate. This is only used for unsupervised modeling. If left blank, a heuristic is used'
        minimum: 1
      forecast_horizon:
        type: integer
        description: Forecast length
      anomaly_prior:
        type: number
        description: A decimal indicating how likely you think anomalies are present in the dataset
        minimum: 0
        maximum: 1
      class_weights:
        type: string
        description: A dictionary containing class names and their respective weights. These weights will be applied to loss calculations for classification.
        pattern: '^\{(([''"])[^"'']+\2\s*:\s*\d+(\.\d*)?\s*,?\s*)+\}$'
      lead_time_days:
        type: integer
        description: 'NBM: The number of days prior to failure when behavior starts trending toward abnormal behavior or failure'
        default: 60
        minimum: 0
      nbm_window_size:
        type: integer
        description: 'NBM: The number of sample points to consider for each failure detection'
        default: 256
        minimum: 1
      nbm:
        type: boolean
        description: 'NBM: Set this to true for NBM model'
        default: false
      failure_dates:
        type: array
        description: 'NBM: A list of failure dates'
        items:
          type: string
      recovery_dates:
        type: array
        description: 'NBM: A list of recovery dates'
        items:
          type: string
      fit_profile_name:
        type: string
        description: The name of the profile
        minLength: 1
        maxLength: 200
        pattern: '^[^\/?&]*$'
    type: object
  Training Results:
    required:
      - job_id
      - job_name
      - model_name
    properties:
      job_name:
        type: string
        description: The job name
      job_id:
        type: string
        description: The job id
      model_name:
        type: string
        description: The model name
    type: object
  Resume training parameters:
    required:
      - dataset_names
    properties:
      dataset_names:
        type: array
        description: A list of dataset names. Currently only one dataset at a time is supported
        items:
          type: string
      cv_kfold:
        type: integer
        description: 'Number of k fold for train/validation cross validation. Default: 1-fold for non-ts and 3-fold for ts data.'
      job_name:
        type: string
        description: The name of the job
        minLength: 1
        maxLength: 200
        pattern: '^[^\/?&]*$'
      max_train_time:
        type: string
        description: 'The maximum amount of time to train the model in HH:MM'
        default: '00:01'
        maxLength: 5
        pattern: '[0-9]{2}:[0-9]{2}'
      max_epochs:
        type: integer
        description: The target to classify/predict
        minimum: 0
      recurrent:
        type: boolean
        description: 'Advanced: Set this to true to use a recurrent model'
      clustering:
        type: boolean
        description: Clustering in unsupervised modeling.
        default: true
      anomaly:
        type: boolean
        description: Standalone Anomaly detection model (no clustering) in unsupervised modeling.
        default: false
      n_clusters:
        type: integer
        description: 'The number of clusters to generate. This is only used for unsupervised modeling. If left blank, a heuristic is used'
        minimum: 1
      forecast_horizon:
        type: integer
        description: Forecast length
      failure_dates:
        type: array
        description: 'NBM: A list of failure dates'
        items:
          type: string
      recovery_dates:
        type: array
        description: 'NBM: A list of recovery dates'
        items:
          type: string
    type: object
  Training Information:
    required:
      - job_id
      - job_name
      - model_name
    properties:
      job_name:
        type: string
        description: The job name
      job_id:
        type: string
        description: The job id
      model_name:
        type: string
        description: The model name
    type: object
  Artifact Result:
    required:
      - artifact
    properties:
      artifact:
        type: string
        description: The artifact data
    type: object
  Dataset:
    required:
      - dataset
    properties:
      dataset:
        type: string
        description: The dataset
      part:
        type: integer
        description: 'The part # of a multi-part dataset, starts with 0'
        example: 1
      note:
        type: string
        description: dataset info
    type: object
  Model Analysis Information:
    required:
      - artifact_name
      - job_id
      - job_name
    properties:
      job_name:
        type: string
        description: The job name
      job_id:
        type: string
        description: The job id
      artifact_name:
        type: string
        description: The artifact name
    type: object
  Data Profile Parameters:
    properties:
      run_async:
        type: boolean
        description: Tells pacman to run asynchronously
        default: false
      job_name:
        type: string
        description: The name of the job
        minLength: 1
        maxLength: 200
        pattern: '^[^\/?&]*$'
      artifact_name:
        type: string
        description: The name of the artifact
        minLength: 1
        maxLength: 200
        pattern: '^[^\/?&]*$'
      index:
        type: string
        description: The index for ordered datasets
        minLength: 1
        maxLength: 200
      max_int_uniques:
        type: integer
        description: 'Advanced: Maximum number of uniques where an integer column will be considered categorical. No integer columns are considered as categorical when this value is 0'
        minimum: 0
      max_unique_values:
        type: integer
        description: 'Advanced: Maximum number of unique values in categorical columns. Columns exceeding this value will be dropped'
        minimum: 0
    type: object
  Dataset Analysis Information:
    required:
      - job_id
      - job_name
      - profile_id
      - profile_name
    properties:
      job_name:
        type: string
        description: The job name or identifier
      job_id:
        type: string
        description: The job id
      profile_name:
        type: string
        description: The clean data name
      profile_id:
        type: string
        description: The clean data id
    type: object
  Model run parameters:
    properties:
      job_name:
        type: string
        description: The name of the job
        minLength: 1
        maxLength: 200
        pattern: '^[^\/?&]*$'
      artifact_name:
        type: string
        description: The name of the artifact
        minLength: 1
        maxLength: 200
        pattern: '^[^\/?&]*$'
      recurrent:
        type: boolean
        description: 'Advanced: Set this to true to use a recurrent model'
      clustering:
        type: boolean
        description: Clustering in unsupervised modeling.
        default: true
      anomaly:
        type: boolean
        description: Standalone Anomaly detection model (no clustering) in unsupervised modeling.
        default: false
      threshold:
        type: integer
        description: Threshold used to time series detect anomalies
        default: 3
      forecast_horizon:
        type: integer
        description: Forecast length
      supervised:
        type: boolean
        description: This argument has been deprecated and is no longer used. It remains here for backwards compatibility with existing pipelines.
      return_risk:
        type: boolean
        description: 'NBM: Set this to true to return risk'
        default: true
      model_type:
        type: string
        description: The model type from the population
        example: DeepNeuralNetwork
        enum:
          - DeepNeuralNetwork
          - RandomForest
          - GradientBoosted
    type: object
  Job Information:
    required:
      - artifact_name
      - job_id
      - job_name
    properties:
      job_name:
        type: string
        description: The job name
      job_id:
        type: string
        description: The job id
      artifact_name:
        type: string
        description: The artifact name
    type: object
  Clean Data Parameters:
    properties:
      run_async:
        type: boolean
        description: Tells pacman to run asynchronously
        default: false
      job_name:
        type: string
        description: The name of the job
        minLength: 1
        maxLength: 200
        pattern: '^[^\/?&]*$'
      artifact_name:
        type: string
        description: The name of the artifact
        minLength: 1
        maxLength: 200
        pattern: '^[^\/?&]*$'
      model_name:
        type: string
        description: The name of the model
        minLength: 1
        maxLength: 200
        pattern: '^[^\/?&]*$'
      target:
        type: string
        description: The target to classify/predict
        minLength: 1
        maxLength: 200
      max_categories:
        type: integer
        description: 'The maximum number of categories for a feature, limits encoding.'
        minimum: 2
      index:
        type: string
        description: The index for ordered datasets
        minLength: 1
        maxLength: 200
      fit_profile_name:
        type: string
        description: The name of the profile
        minLength: 1
        maxLength: 200
        pattern: '^[^\/?&]*$'
      fit_params:
        description: User modifications for fit
        $ref: '#/definitions/fit_params'
    type: object
  fit_params:
    required:
      - data
    properties:
      metadata:
        description: Dataset configurations
        $ref: '#/definitions/metadata'
      data:
        type: array
        description: Feature-specific configurations
        items:
          description: Feature-specific configurations
          $ref: '#/definitions/data'
    type: object
  metadata:
    properties:
      imputer:
        type: string
        description: How should missing values be replaced?
      scaler:
        type: string
        description: How should this dataset be scaled?
    type: object
  data:
    required:
      - name
    properties:
      name:
        type: string
        description: The name of the feature.
      treatment:
        type: string
        description: The feature's data type.
      drop:
        type: boolean
        description: Indicates the user wants this feature dropped
      is_target:
        type: boolean
        description: Indicates this feature is the target feature in a supervised problem.
    type: object
  Risk parameters:
    properties:
      job_name:
        type: string
        description: The name of the job
        minLength: 1
        maxLength: 200
        pattern: '^[^\/?&]*$'
      artifact_name:
        type: string
        description: The name of the artifact
        minLength: 1
        maxLength: 200
        pattern: '^[^\/?&]*$'
      risk_columns:
        type: array
        description: A list of risk columns
        items:
          type: string
      shutdown_column:
        type: string
        description: The name of the failure time column in the failure data
        minLength: 1
        maxLength: 200
      return_column:
        type: string
        description: The name of the return time column in the failure data
        minLength: 1
        maxLength: 200
      asset_column:
        type: string
        description: The name of the asset name column in the failure data
        minLength: 1
        maxLength: 200
      lead_time:
        type: integer
        description: The lead time in seconds
        minimum: 0
      functional_form:
        type: string
        description: The risk function
        example: step
        enum:
          - step
          - linear
          - sigmoid
          - exponential
    type: object
  Risk Results:
    required:
      - artifact_name
      - job_id
      - job_name
    properties:
      job_name:
        type: string
        description: The job name
      job_id:
        type: string
        description: The job id
      artifact_name:
        type: string
        description: The artifact name
    type: object
  API Info:
    properties:
      available_routes:
        type: object
        description: Routes currently available for use in the API
      local:
        type: boolean
        description: This is true if the API is running locally or on-prem without accessto cloud infrastructure
      api_version:
        type: string
        description: Current version of API
    type: object
responses:
  ParseError:
    description: When a mask can't be parsed
  MaskError:
    description: When any error occurs on mask
